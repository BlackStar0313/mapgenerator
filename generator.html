<html>
<head>
    <title>Map Generator</title>
    <script src="libraries/mootools.js" type="text/javascript"></script>
    <script src="libraries/raphael.js" type="text/javascript"></script>
    <script src="mapGenerator.js" type="text/javascript"></script>
    <script src="generator.js" type="text/javascript"></script>
    <script src="draw.js" type="text/javascript"></script>
    <script type="text/javascript">
        var generator = new MapGenerator(1200, 600, 35);
        var countries;
        var ut;
        
        window.addEvent('domready', function() {
            
            generator.init(true);
            generator.generate(20, 0.5, 1);
            
            countries = generator.getCountries();
            
            map = Raphael("map", 1600, 600);
            var fill = map.rect(0, 0, 1600, 600).attr("fill", /*"#0C45CF"*/"#111133");
            /*for (var i = 0; i < generator.map.countries.length; i++) {
                drawCountry(generator.map.countries[i].outline, generator.map.countries[i].center);
            }*/
            
            ut = generator.getUnitacsClientMap();
            
            for (var i = 0; i < ut.regions.length; i++) {
                var color = "#"+toHex(rand(50,200));
                color += toHex(rand(50,200));
                color += toHex(rand(50,200));
                
                map.path(ut.regions[i].pathString).attr("fill", color);
                map.circle(ut.regions[i].center.x, ut.regions[i].center.y, 5).attr("fill", '#ff0000');
            }
    
            console.log(ut.toSource());
            
            for (var i = 0; i < ut.regions.length; i++) {
                for (var j = 0; j < ut.regions[i].neighborIDs.length; j++) {
                    map.path('M' + ut.regions[i].center.x + ',' + ut.regions[i].center.y + 'L' +  ut.regions[ut.regions[i].neighborIDs[j]].center.x + ',' + ut.regions[ut.regions[i].neighborIDs[j]].center.y + 'Z');
                }
            }
        });
    
    
    </script>
</head>
<body>
    <div id="map">
    </div>
</body>
</html>